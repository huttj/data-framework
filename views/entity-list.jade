extends layout

block content
  .row
    h1
      a(href="/")= title

  .row
    h2.pull-left #{entity.replace(/_/g, ' ')} List
    a(href="/#{entity}/new" style="margin-top: 1.25em").btn.btn-primary.pull-right New


  .row
    table.table.table-hover
      thead
        tr
          - for val, key in schema
            th= key
          th Delete
      tbody
        - for model in models
          tr
            - for val, key in model
              - if (schema[key] && typeof val === 'object' && val)
                td
                  a(href="/#{fks[key.replace(/ /g, '_')]}/#{val.id}") #{val.Name}
              - else if (schema[key])
                - if (key === 'Name')
                  td
                    a(href="/#{entity}/#{model.id}")= val || '(unknown)'
                - else
                  td= val
            td
              form(action="/#{entity}/#{model.id}/delete" method="POST")
                button(type="submit").btn.btn-danger X